{
  "version": 3,
  "sources": ["../bin/live-reload.js", "../src/utils/ads.ts", "../src/index.ts"],
  "sourcesContent": ["new EventSource(`${SERVE_ORIGIN}/esbuild`).addEventListener('change', () => location.reload());\n", "export const ads = async function () {\n  // Positions page //\n  const getPositions = async function () {\n    // Elements\n    const element = document.querySelector('.positions_wrapper');\n    const templateElement = element?.cloneNode(true);\n    const list = element.parentElement;\n    const loader = document.querySelector('.positions_loader');\n    const adsCount = document.querySelector('[ponty-element=\"count\"]');\n\n    // Fetch url\n    const adsURL =\n      'https://oio.ponty-system.se/extapi/job?p=eyJ0IjogW119.c309dfdb4a0280110cd800184bc693d8ad0b8ebb13597ffca9095f95df39aa82';\n\n    // Fetch ads from Ponty feed URL\n    const newAds = await getAds(adsURL);\n\n    // Create and insert ad for all ads\n    newAds.forEach((ad) => {\n      const newAd = createItem(ad, templateElement);\n      list?.insertAdjacentElement('afterbegin', newAd);\n      element?.remove();\n    });\n\n    setTimeout(() => {\n      loader?.classList.add('is-not-loading');\n      list?.classList.add('is-loaded');\n      adsCount.textContent = newAds.length;\n      adsCount.style.opacity = '1';\n    }, 500);\n\n    // Open add\n    list?.addEventListener('click', (e) => {\n      const ad = e.target.closest('.positions_wrapper');\n      if (!ad) return;\n\n      window.location.href = `/tjanster/tjanst?id=${ad.dataset.pontyid}`;\n    });\n  };\n\n  // Position page //\n  const getPosition = async function () {\n    const positionWrapper = document.querySelector('.position_wrapper');\n    const urlParams = new URLSearchParams(window.location.search);\n    const adID = urlParams.get('id');\n    if (!adID) {\n      setPositionEmpty();\n      return;\n    }\n\n    // Fetch url\n    const adsURL =\n      'https://oio.ponty-system.se/extapi/job?p=eyJ0IjogW119.c309dfdb4a0280110cd800184bc693d8ad0b8ebb13597ffca9095f95df39aa82';\n\n    const ads = await getAds(adsURL);\n    const [ad] = ads.filter((ad) => ad.assignment_id == adID);\n    if (!ad) {\n      setPositionEmpty();\n      return;\n    }\n    loadAdPage(ad);\n    setPositionLoaded();\n\n    function setPositionEmpty() {\n      positionWrapper?.classList.remove('position-loading');\n      positionWrapper?.classList.add('position-empty');\n    }\n\n    function setPositionLoaded() {\n      positionWrapper?.classList.remove('position-loading');\n      positionWrapper?.classList.add('position-loaded');\n    }\n  };\n\n  // FUNCTIONS //\n  function getAds(url) {\n    return fetch(url)\n      .then((res) => {\n        return res.json();\n      })\n      .then((data) => {\n        const { jobs } = data;\n        return jobs;\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  }\n\n  // Returns a new ad item\n  function createItem(ad, templateElement) {\n    const item = templateElement.cloneNode(true);\n    const title = item.querySelector('[ponty-element=\"title\"]');\n    const company = item.querySelector('[ponty-element=\"company\"]');\n    const location = item.querySelector('[ponty-element=\"location\"]');\n    // const extent = item.querySelector('[ponty-element=\"extent\"]');\n    const logo = item.querySelector('[ponty-element=\"logo\"]');\n\n    if (title) title.textContent = ad.title;\n    if (company) company.textContent = ad.organization_name;\n    if (location) location.textContent = ad.location;\n    if (item) item.dataset.pontyid = ad.assignment_id;\n    if (logo && ad.logo) logo.src = ad.image_url;\n    if (logo && !ad.logo)\n      logo.src =\n        'https://uploads-ssl.webflow.com/64745e9073bbb3463f837322/647ed34c103fe265433f78c4_logoipsum-263.svg';\n\n    return item;\n  }\n\n  function loadAdPage(ad) {\n    const title = document.querySelector('[ponty-element=\"title\"]');\n    const company = document.querySelector('[ponty-element=\"company\"]');\n    const contact = document.querySelector('[ponty-element=\"name\"]');\n    const location = document.querySelector('[ponty-element=\"location\"]');\n    const extent = document.querySelector('[ponty-element=\"extent\"]');\n    const content = document.querySelector('[ponty-element=\"body\"]');\n    const button1 = document.querySelector('[ponty-element=\"button\"]');\n    const logo = document.querySelector('[ponty-element=\"logo\"]');\n    const button2 = document.querySelector('[ponty-element=\"button2\"]');\n    const headElement = document.querySelector('head');\n    const metaTitle = headElement.querySelector('title');\n    const metaTitle2 = headElement?.querySelector('[property=\"og:title\"]');\n    const metaTitle3 = headElement?.querySelector('[property=\"twitter:title\"]');\n\n    // Add content to existing Webflow/HTML elements\n    if (title) title.textContent = ad.title;\n    if (metaTitle) metaTitle.textContent = ad.title + ' | OIO Rekrytering';\n    if (metaTitle2) metaTitle2.setAttribute('content', ad.title + ' | OIO Rekrytering');\n    if (metaTitle3) metaTitle3.setAttribute('content', ad.title + ' | OIO Rekrytering');\n    if (company) company.textContent = ad.organization_name;\n    if (contact) contact.textContent = ad.user_name;\n    if (location) location.textContent = ad.location;\n    if (content) content.replaceWith(createMainContent(ad.body));\n    if (button1) button1.href = ad.apply_url;\n    if (button2) button2.href = ad.apply_url;\n    if (logo && ad.logo) logo.src = ad.image_url;\n    if (logo && !ad.logo)\n      logo.src =\n        'https://uploads-ssl.webflow.com/64745e9073bbb3463f837322/647ed34c103fe265433f78c4_logoipsum-263.svg';\n  }\n\n  function createMainContent(string) {\n    const parser = new DOMParser();\n    const html = parser.parseFromString(string, 'text/html');\n    const div = document.createElement('div');\n    div.classList.add('text-rich-text');\n\n    while (html.body.firstChild) {\n      div.appendChild(html.body.firstChild);\n    }\n\n    return div;\n  }\n\n  if (window.location.pathname === '/tjanster/tjanst') getPosition();\n  if (window.location.pathname === '/tjanster') getPositions();\n};\n", "import { ads } from '$utils/ads';\n\n\nwindow.Webflow ||= [];\nwindow.Webflow.push(() => {\n  ads();\n});\n"],
  "mappings": "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",
  "names": ["ads", "ad", "location"]
}
